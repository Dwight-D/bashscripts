#!/bin/bash
#Autogenerated script template

#     Variable declarations
#========================================

me=${0##*/}
fields=""
delimiter=' '

usage (){
    echo "$me - Squeeze repeated chars and cut fields from stdin"
    echo "Usage: $me fields [-d delimChar=' ']"
    echo -e "\nExample: echo '1    skip 3' | squt 1,3"
    exit 1
}


#       Parse options
#=======================================

while getopts "hd:" opt; do
    case $opt in
        h )
            usage
            ;;
        d )
            delimiter=$OPTARG
            ;;
        \? )
            usage
            ;;
        : )
            echo "Option requires an argument: $OPTARG"
            exit
            ;;
    esac
done
shift $((OPTIND -1))

if [ "$#" -lt 1 ]; then
    usage
fi

fields=$1

while read line; do
    echo $line | tr -s "$delimiter" | cut -d "$delimiter" -f "$fields"
done
